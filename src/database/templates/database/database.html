{% extends 'base.html' %}

{% block content %}
<div class="database">
    <div class="lside-content">
        <a href="{% url 'word:tag' %}"><button class="button-word">
            Tambah tag <i class="fa fa-plus" aria-hidden="true"></i>
        </button></a>
        <table>
        <tbody>
        {% for tags in tobject %}
            <tr>
                <td>
                    <a href="{% url 'database:database' %}?t={{ tags.name }}">{{ tags.name }}</a>
                </td>
                <td>
                    <a href="{% url 'word:tag-delete' tags.pk %}"><button class="button-word"><i class="fa fa-times" aria-hidden="true"></i></button></a>
                </td>
                <td>
                    <a href="{% url 'word:tag-update' tags.pk %}"><button class="button-word">
                        <i class="fa fa-repeat" aria-hidden="true"></i>
                    </button></a>
                </td>
            </tr>            
        {% endfor %}
        </tbody>
        </table>
        <!-- <a href="{% url 'database:database' %}">Reset</a> -->
    </div>

    <div class="main-container">
      {% if page == 'database' %}
    <div style="display: flex; align-items: center;">
        <form method="GET" action="{% url 'database:database' %}">
            <input class="search-db" type="text" name="s"/> <button class="btn-search">Cari</button>
        </form>
        <a style="margin-left: auto;" href="{% url 'database:list' %}"><button class="button-word">
            Laporan {{ count }} <i class="fa fa-flag-o" aria-hidden="true"></i>
        </button></a>
    </div>
    
        <table id="d-table">
            <thead>
                <tr>
                    <th>Nama pengguna</th>
                    <th>Email</th>
                    <th>Terakhir masuk</th>
                    <th>Tanggal Bergabung</th>
                </tr>
            </thead>
            <tbody>
                {% for user in uobject %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.last_login }}</td>
                    <td>{{ user.date_joined }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
    
        <table id="d-table">
            <thead>
                <tr>
                    <th>Word</th>
                    <th>Definisi</th>
                    <th>Penulis</th>
                    <th>Date</th>
                    <th>Up</th>
                    <th>Down</th>
                    <th>Pronunciation</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for word in wobject %}
                <tr>
                    <td>
                        <a href="{% url 'word:word' word.pk %}">
                        {{ word.word }}
                        </a>
                    </td>
                    <td>{{ word.definition|linebreaks }}</td>
                    <td>{{ word.user }}</td>
                    <td>{{ word.date }}</td>
                    <td>{{ word.up }}</td>
                    <td>{{ word.down }}</td>
                    <td>{{ word.pronunciation }}</td>
                    <td>
                        <a href="{% url 'word:delete' word.pk %}"><button class="button-word">Hapus <i class="fa fa-times" aria-hidden="true"></i></button></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

      {% else %}
        <h2>Word Report</h2>
        {% if robject.count != 0 %}
        <table id="d-table">
            <thead>
                <tr>
                    <th>Categori</th>
                    <th>Pengguna</th>
                    <th>Kata</th>
                    <th>Tanggal</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for report in robject %}
                <tr>
                    <td><a href="{% url 'database:view' report.pk %}">{{ report.category }}</a></td>
                    <td><a href="{% url 'user' report.user.pk %}">{{ report.user }}</a></td>
                    <td><a href="{% url 'word:word' report.word.pk %}">{{ report.word }}</a></td>
                    <td>{{ report.date }}</td>
                    <td>
                        <a href="{% url 'database:done' report.pk %}"><button class="button-word">Selesai</button></a>
                        <a href="{% url 'database:delete' report.pk %}"><button class="button-word">Hapus</button></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <h3 style="color: red;">Tidak ada laporan!</h3>
        {% endif %}
        <br>

        <h2>Selesai</h2>
        {% if done.count != 0 %}
        <table id="d-table">
            <thead>
                <tr>
                    <th>Categori</th>
                    <th>Pengguna</th>
                    <th>Kata</th>
                    <th>Tanggal</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for rptdone in done %}
                <tr>
                    <td><a href="{% url 'database:view' rptdone.pk %}">{{ rptdone.category }}</a></td>
                    <td><a href="{% url 'user' rptdone.user.pk %}">{{ rptdone.user }}</a></td>
                    <td><a href="{% url 'word:word' rptdone.word.pk %}">{{ rptdone.word }}</a></td>
                    <td>{{ rptdone.date }}</td>
                    <td>
                        <a href="{% url 'database:done' rptdone.pk %}"><button class="button-word">Tinjau Kembali</button></a>
                        <a href="{% url 'database:delete' rptdone.pk %}"><button class="button-word">Hapus</button></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <h3 style="color: red;">Tidak ada laporan yang selesai</h3>
        {% endif %}
        <br>
           
        <h2>Kata-kata yang disensor</h2>
         <a href="{% url 'database:censor-create' %}"><button class="button-word">
            Tambah Kata <i class="fa fa-plus" aria-hidden="true"></i>
        </button></a>
            <table id="d-table">
                <thead>
                    <tr>
                        <th>Kata</th>
                        <th>Tanggal</th>
                        <th>Despripsi</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for csp in censored %}
                    <tr>
                        <td>
                            <a href="{% url 'database:censor-edit' csp.pk %}">
                            {{ csp.name }}
                            </a>
                        </td>
                        <td>{{ csp.date }}</td>
                        <td>{{ csp.description|linebreaks }}</td>
                        <td>
                            <a href="{% url 'database:censor-delete' csp.pk %}">
                                <button class="button-word">Hapus</button>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
      {% endif %}
    </div>
</div>
{% endblock %}